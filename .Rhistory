install.packages("roxygen2")
devtools::install_github("r-lib/roxygen2")
library(devtools)
devtools::install_github("r-lib/roxygen2")
require(jsonlite)
require(ggplot2)
require(lubridate)
require(stringr)
library(foreign)
library(readxl)
library(tidyverse)
require(tidyr)
library(dplyr)
require(plyr)
library(httr)
#Creando funci?n para importar datos
importbcrp<-function(x,y,z){
# Llamar al Url
url <-paste('https://estadisticas.bcrp.gob.pe/estadisticas/series/api/',x,'/json/',y,'/',z,'/', sep="")
# Descargamos el url
tmp1  <- fromJSON(readLines(url, warn="F"))
# Cambiamos el formato de los datos y cambiamos el valor de las variables con missing values.
dato <-as.data.frame(lapply(tmp1$periods, function(y) gsub("n.d.", "-99999.99", y)))
# Cambiamos el nombre del archivo usando el ID que lo identifica.
names(dato) <- c("Fecha",paste("",x,"",sep=""))
#View(dato)
# Guardar en csv
#write.csv2(dato, file=paste(x,'.csv', sep=""))
#  }, error=function(e){})
return(dato)
}
#Probando la funcion
importbcrp('PN01205PM','2005-8','2020-9')
##################################
##        IMPORTAR BCRP         ##
##################################
#' @title importbcrp
#' @description Importar datos del BCRP.
#' @param x un elemento
#' @details Esta funcion es parte del tutorial para hacer paquetes del curso de Metodos Multivariados 2017
#' en el ITAM. La funcion recibe un elemento \code{x} que puede ser un numero o un vector numerico y lo devuelve
#' multiplicado por dos. La documentacion de ayuda es generada usando roxygen2.
#' @examples
#' importbcrp('PN01205PM','2005-8','2020-9')
#' @export
#install.packages('jsonlite')
#install.packages('ggplot2')
#install.packages('tidyverse')
#install.packages('lubridate')
#install.packages('dplyr')
#install.packages("readxl")
require(jsonlite)
require(ggplot2)
require(lubridate)
require(stringr)
library(foreign)
library(readxl)
library(tidyverse)
require(tidyr)
library(dplyr)
require(plyr)
library(httr)
#Creando funci?n para importar datos
importbcrp<-function(x,y,z){
# Llamar al Url
url <-paste('https://estadisticas.bcrp.gob.pe/estadisticas/series/api/',x,'/json/',y,'/',z,'/', sep="")
# Descargamos el url
tmp1  <- fromJSON(readLines(url, warn="F"))
# Cambiamos el formato de los datos y cambiamos el valor de las variables con missing values.
dato <-as.data.frame(lapply(tmp1$periods, function(y) gsub("n.d.", "-99999.99", y)))
# Cambiamos el nombre del archivo usando el ID que lo identifica.
names(dato) <- c("Fecha",paste("",x,"",sep=""))
#View(dato)
# Guardar en csv
#write.csv2(dato, file=paste(x,'.csv', sep=""))
#  }, error=function(e){})
return(dato)
}
#' @title Importar BCRP
#' @description Esta es una funcion de ejemplo para importar datos BCRP.
#' @param x un elemento
#' @details Esta función importa los datos BCRP.
#' @examples
#' importbcrp('PN01205PM','2005-8','2020-9')
#' @export
#install.packages('jsonlite')
#install.packages('ggplot2')
#install.packages('tidyverse')
#install.packages('lubridate')
#install.packages('dplyr')
#install.packages("readxl")
require(jsonlite)
require(ggplot2)
require(lubridate)
require(stringr)
library(foreign)
library(readxl)
library(tidyverse)
require(tidyr)
library(dplyr)
require(plyr)
library(httr)
#Creando funci?n para importar datos
importbcrp<-function(x,y,z){
# Llamar al Url
url <-paste('https://estadisticas.bcrp.gob.pe/estadisticas/series/api/',x,'/json/',y,'/',z,'/', sep="")
# Descargamos el url
tmp1  <- fromJSON(readLines(url, warn="F"))
# Cambiamos el formato de los datos y cambiamos el valor de las variables con missing values.
dato <-as.data.frame(lapply(tmp1$periods, function(y) gsub("n.d.", "-99999.99", y)))
# Cambiamos el nombre del archivo usando el ID que lo identifica.
names(dato) <- c("Fecha",paste("",x,"",sep=""))
#View(dato)
# Guardar en csv
#write.csv2(dato, file=paste(x,'.csv', sep=""))
#  }, error=function(e){})
return(dato)
}
#' @title Importar BCRP
#' @description Esta es una funcion de ejemplo para importar datos BCRP.
#' @param x un elemento
#' @details Esta función importa los datos BCRP.
#' @examples
#' importbcrp('PN01205PM','2005-8','2020-9')
#' @export
importbcrp<-function(x,y,z){
# Llamar al Url
url <-paste('https://estadisticas.bcrp.gob.pe/estadisticas/series/api/',x,'/json/',y,'/',z,'/', sep="")
# Descargamos el url
tmp1  <- fromJSON(readLines(url, warn="F"))
# Cambiamos el formato de los datos y cambiamos el valor de las variables con missing values.
dato <-as.data.frame(lapply(tmp1$periods, function(y) gsub("n.d.", "-99999.99", y)))
# Cambiamos el nombre del archivo usando el ID que lo identifica.
names(dato) <- c("Fecha",paste("",x,"",sep=""))
#View(dato)
# Guardar en csv
#write.csv2(dato, file=paste(x,'.csv', sep=""))
#  }, error=function(e){})
return(dato)
}
library(BCRPR)
library(roxygen2)
#' @title Importar BCRP
#' @description Esta es una funcion de ejemplo para importar datos BCRP.
#' @param x un elemento
#' @details Esta función importa los datos BCRP.
#' @examples
#' importbcrp('PN01205PM','2005-8','2020-9')
#' @export
importbcrp<-function(x,y,z){
# Llamar al Url
url <-paste('https://estadisticas.bcrp.gob.pe/estadisticas/series/api/',x,'/json/',y,'/',z,'/', sep="")
# Descargamos el url
tmp1  <- fromJSON(readLines(url, warn="F"))
# Cambiamos el formato de los datos y cambiamos el valor de las variables con missing values.
dato <-as.data.frame(lapply(tmp1$periods, function(y) gsub("n.d.", "-99999.99", y)))
# Cambiamos el nombre del archivo usando el ID que lo identifica.
names(dato) <- c("Fecha",paste("",x,"",sep=""))
#View(dato)
# Guardar en csv
#write.csv2(dato, file=paste(x,'.csv', sep=""))
#  }, error=function(e){})
return(dato)
}
